{% include "manager/top.html" %}
<link href="/static/metronic/assets/global/plugins/datatables/datatables.min.css" rel="stylesheet" type="text/css" />
<link href="/static/metronic/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css" rel="stylesheet" type="text/css" />
<link href="/static/metronic/assets/global/css/components.min.css" rel="stylesheet" id="style_components" type="text/css" />
<link href="/static/metronic/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css" />

<link href="/static/metronic/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css" />

<script src="/static/metronic/assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="/static/metronic/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="/static/metronic/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>


<script src="/static/metronic/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>

<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="/static/metronic/assets/pages/scripts/table-datatables-responsive.min.js" type="text/javascript"></script>


<!-- start: Content -->
<div id="content" class="col-md-12">

	<div class="portlet light">
		<div class="portlet-title">
			<div class="caption font-dark">
				<i class="icon-settings font-dark"></i>
				<span class="caption-subject bold uppercase">航天器预排名</span>
			</div>
			<div class="tools"></div>
		</div>

		<!--div class="span12"-->
		<div class="box layui-col-md12">
			<!--<div class="box-header" data-original-title>
				<h2><i class="halflings-icon white align-justify"></i><span class="break"></span>评估分组管理</h2>
				<div class="box-icon">
					<a href="#" class="btn-minimize"><i class="halflings-icon white chevron-up"></i></a>
					<a href="#" class="btn-close"><i class="halflings-icon white remove"></i></a>
				</div>
			</div>-->
			<!--<div class="box-content">-->
			<div class='row'>
				<div class='col-xs-3'>
					<select class="condition" id="factory" style="width: 100%">
                    <option value=""></option>
                    <option value="all">全部总体单位</option>
                    <option value="总体部">总体部</option>
                    <option value="通信卫星事业部">通信卫星事业部</option>
                    <option value="载人航天总体部">载人航天总体部</option>
                    <option value="航天东方红">航天东方红</option>
                    <option value="深圳东方红">深圳东方红</option>
                    <option value="其它">其它</option>
              </select>
				</div>
				<div class='col-xs-3'>
					<select class="condition" id="applyField" style="width: 100%">
                    <option value=""></option>
                    <option value="all">全部应用领域</option>
                    <option value="军用">军用</option>
                    <option value="民用">民用</option>
                    <option value="商用">商用</option>
                    <option value="载人">载人</option>
                    <option value="深空">深空</option>
                    <option value="科研">科研</option>
                    <option value="其它">其它</option>
                </select>
				</div>
				
				<div class='col-xs-3'>
					<select class="condition" style="width: 100%" id="orbitType">
                    <option value=""></option>
                    <option value="all">全部轨道类型</option>
                    <option value="LEO">LEO</option>
                    <option value="MEO">MEO</option>
                    <option value="GEO">GEO</option>
                    <option value="IGSO">IGSO</option>
                    <option value="环月轨道">环月轨道</option>
                    <option value="其它">其它</option>
                </select>
				</div>
				
				<div class='col-xs-3'>
					<select class="condition" style="width: 100%" id="platform">
                	<option value=""></option>
                 	<option value="all">全部卫星平台</option>
                 	<option value="921航天器">921航天器</option>
                 	<option value="CAST100">CAST100</option>
                 	<option value="CAST20">CAST20</option>
                 	<option value="CAST2000A">CAST2000A</option>
                 	<option value="CAST2000B">CAST2000B</option>
                 	<option value="CAST3000A">CAST3000A</option>
                 	<option value="CAST3000B">CAST3000B</option>
                 	<option value="DFH-3">DFH-3</option>
                 	<option value="DFH-3A">DFH-3A</option>
                 	<option value="DFH-3B">DFH-3B</option>
                 	<option value="DFH-4">DFH-4</option>
                 	<option value="DFH-4Y">DFH-4Y</option>
                 	<option value="ZY1000A">ZY1000A</option>
                 	<option value="ZY1000B">ZY1000B</option>
                 	<option value="导航卫星专用平台">导航卫星专用平台</option>
                 	<option value="返回式平台">返回式平台</option>
                 	<option value="皮纳平台">皮纳平台</option>
                 	<option value="探月航天器">探月航天器</option>
                 	<option value="微纳平台">微纳平台</option>
                 	<option value="其它">其它</option>
               </select>
				</div>
			</div>
			
			
			
			
			
			<div class="portlet-body">
				<table id="example" class="table table-striped table-bordered table-hover dt-responsive" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th>名称</th>
							<th>代号</th>
							<th>F0</th>
							<th>F1</th>
							<th>F2</th>
							<th>F3</th>
							<th>F4</th>
							<th>E</th>
							<th>L</th>
							<th>EL</th>
							<th>Q</th>
							<th>S</th>
							<th>操作</th>
						</tr>
					</thead>
				</table>
			</div>
		</div>
		<!--/span-->
	</div>

</div>
<!--/.fluid-container-->

<!-- end: Content -->

<script>
	
	$(document).ready(function() {
		$('#factory').select2({placeholder: "限定研制单位", minimumResultsForSearch: Infinity});
    $('#applyField').select2({placeholder: "限定应用领域", minimumResultsForSearch: Infinity});
    $('#orbitType').select2({placeholder: "限定轨道形式", minimumResultsForSearch: Infinity});
    $('#platform').select2({placeholder: "限定卫星平台", minimumResultsForSearch: Infinity});
    
    $('#example').DataTable({
      ajax: {
        url: '/manager/index/getPreRank',
        //url: '/home/rank/getRankHidden',
        type: 'post',
        data: {
          factory: function () {
            return $('#factory').val()
          },
          applyField: function () {
            return $('#applyField').val()
          },
          orbitType: function () {
            return $('#orbitType').val()
          },
          platform: function () {
            return $('#platform').val()
          }
        }
      },
      //ordering: false,
      dom: 'flrtip',
      columns: [
        {
          "data": "name"
        },
        {
          "data": "code_out"
        },
        {
          "data": "F0"
        },
        {
          "data": "F1"
        },
        {
          "data": "F2"
        },
        {
          "data": "F3"
        },
        {
          "data": "F4"
        },
        {
          "data": "E"
        },
        {
          "data": "L"
        },
        {
          "data": "EL"
        },
        {
          "data": "Q"
        },
        {
          "data": "score"
        },
        {
          "data": "code"
        }
      ],
      columnDefs: [{
        render: function (data, type, row) {
          return '<a id="check" class="lookBtn">查看</a>';
        },
        targets: 12
      }],
      language: {
        decimal: "",
        emptyTable: "表中数据为空",
        info: "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
        infoEmpty: "显示第 0 至 0 项结果，共 0 项",
        infoFiltered: "(由 _MAX_ 项结果过滤)",
        infoPostFix: "",
        thousands: ",",
        lengthMenu: "显示 _MENU_ 项结果",
        loadingRecords: "载入中...",
        processing: "处理中...",
        search: "搜索:",
        zeroRecords: "没有匹配结果",
        paginate: {
          first: "首页",
          last: "末页",
          next: "＞",
          previous: "＜"
        },
        aria: {
          sortAscending: ": 以升序排列此列",
          sortDescending: ": 以降序排列此列"
        }
      }
    });

    $('#example tbody').on('click', 'a#check', function() {
      var data = $('#example').DataTable().row($(this).parents('tr')).data();
      var hrefv = '/home/single/index?_id=' + data._id+'&rbacSatCode='+data.code;
      window.open(hrefv);
    });


    $('.condition').on("change", function (e) {
      $('#example').DataTable().ajax.reload();
    });
	});
</script>

</body>

</html>