{% include "./top.html" %}
<!-- BEGIN THEME GLOBAL STYLES -->
<link href="/static/metronic/assets/global/css/components.min.css" rel="stylesheet" id="style_components"
      type="text/css"/>
<link href="/static/metronic/assets/global/css/plugins.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/metronic/assets/global/plugins/select2/css/select2.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/metronic/assets/global/plugins/select2/css/select2-bootstrap.min.css" rel="stylesheet"
      type="text/css"/>

<!-- END THEME GLOBAL STYLES -->
<script src="/static/metronic/assets/global/plugins/select2/js/select2.full.min.js" type="text/javascript"></script>
<script src="/static/metronic/assets/global/plugins/jquery-validation/js/jquery.validate.min.js"
        type="text/javascript"></script>
<script src="/static/metronic/assets/global/plugins/jquery-validation/js/additional-methods.min.js"
        type="text/javascript"></script>

<script src="/static/metronic/assets/global/plugins/jquery-validation/js/localization/messages_zh.min.js"
        type="text/javascript"></script>

<script src="/static/metronic/assets/global/scripts/app.min.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<div class="col-md-12">
    <!-- BEGIN EXAMPLE TABLE PORTLET-->
    <div class="portlet light " style="margin-bottom: 0px;padding-bottom: 0px;">
        <div class="portlet-body form" style="padding-top: 8px !important;">
            <form class="form-horizontal" id="form_satellite">
                <div class="form-body" style="padding: 0px !important;">
                    <input type="hidden" id="_id" name="_id" value="{{data._id}}">
                    <input type="hidden" id="_satid" name="_satid" value="{{sat._id}}">
                    <div class="alert alert-danger display-hide">
                        <button class="close" data-close="alert"></button>
                        表单验证失败，请检查表单内容.
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="insid">指令代号<span> * </span></label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="insid" name="insid" value="{{data.insid}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="insname">指令名字<span> * </span></label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="insname" name="insname" value="{{data.insname}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="instype">指令类型</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="instype" name="instype" value="{{data.instype}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="insno">指令编号<span> * </span></label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="insno" name="insno" value="{{data.insno}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="device">所属分系统</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="device" name="device" value="{{data.device}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="insplus">脉冲标志</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="insplus" name="insplus" value="{{data.insplus}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="channel">所属数据流</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="channel" name="channel" value="{{data.channel}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="ins_enable">使能标志</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="ins_enable" name="ins_enable" value="{{data.ins_enable}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="inssubs">允许发送分系统</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="inssubs" name="inssubs" value="{{data.inssubs}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="inswidth">脉冲宽度</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="inswidth" name="inswidth" value="{{data.inswidth}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="insparsrule">参数判读规则</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="insparsrule" name="insparsrule" value="{{data.insparsrule}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="inspars">相关参数</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="inspars" name="inspars" value="{{data.inspars}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="instarget">发送目的</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="instarget" name="instarget" value="{{data.instarget}}">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">
                                <label class="control-label col-xs-4" for="critical">是否关键参数</label>
                                <div class="col-xs-8">
                                    <input type="text" class="form-control" id="critical" name="critical" value="{{data.critical}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-xs-2" for="scaleword">比例式指令码</label>
                        <div class="col-xs-10">
                            <input type="text" class="form-control" id="scaleword" name="scaleword" value="{{data.scaleword}}">
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!--这里是遥控指令的编辑表单页面，对应“2.2.4 遥控指令”-->

<script>
  var callbackdata = function() {
    $('#form_satellite').submit();
    var validate = $('#form_satellite').valid();
    if (validate) {
      return [form2obj('form_satellite')];
    } else {
      return null;
    }
  };

  $(document).ready(function() {
    var rules = {
      insname: {
        minlength: 2,
        required: true,
        remote: {
          url: 'doValidateInsName',
          type: 'post',
          data: {
            'insname': function() {
              return $('#insname').val();
            },
            '_instructionid': function() {
              return $('#_id').val();
            },
            '_satid': function() {
              return $('#_satid').val();
            }
          }
        }
      },
      insid: {
        minlength: 2,
        required: true,
        remote: {
          url: 'doValidateInsid',
          type: 'post',
          data: {
            'insid': function() {
              return $('#insid').val();
            },
            '_instructionid': function() {
              return $('#_id').val();
            },
            '_satid': function() {
              return $('#_satid').val();
            }
          }
        }
      },
      insno: {
        minlength: 2,
        maxlength: 10,
        required: true,
        remote: {
          url: 'doValidateInsNo',
          type: 'post',
          data: {
            'insno': function() {
              return $('#insno').val();
            },
            '_instructionid': function() {
              return $('#_id').val();
            },
            '_satid': function() {
              return $('#_satid').val();
            }
          }
        }
      }
    }
    var message = {
      insno: {remote: '指令编号不合法或已被占用'},
      insname: {remote: '指令名称不合法或已被占用'},
      insid: {remote: '指令代号不合法或已被占用'}
    };
    bindFormValidate('#form_satellite', rules, message);
  });

</script>

{% include "./footer.html" %}
